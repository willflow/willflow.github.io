(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{322:function(e,r,t){var a=t(366);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,t(6).default)("4e041c06",a,!1,{sourceMap:!1})},365:function(e,r,t){"use strict";var a=t(322);t.n(a).a},366:function(e,r,t){(e.exports=t(5)(!1)).push([e.i,"\n.page-register .header{border-bottom:2px solid #2bb8aa;color:#666;min-width:980px\n}\n.page-register .header header{margin:0 auto;padding:10px 0;width:980px\n}\n.page-register .header header .site-logo{background-image:url(//s0.meituan.net/bs/file/?f=fe-sso-fs%3Abuild%2Fassets%2Fsp-normal.2ee5c09.png);background-position:-669px -748px;display:inline-block;height:36px;text-indent:-9999px;width:128px;width:54px\n}\n.page-register .header header .login{float:right\n}\n.page-register .header header .bold{font-style:normal\n}\n.page-register>section{box-sizing:border-box;margin:0 auto 30px;min-height:300px;padding-right:550px;padding-top:30px;width:980px\n}\n.page-register>section .status{color:#e6a23c;font-size:12px;margin-left:20px\n}\n.page-register>section .error{color:red\n}",""])},414:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"page-register"},[t("article",{staticClass:"header"},[t("header",[t("a",{staticClass:"site-logo",attrs:{href:"/"}}),e._v(" "),t("span",{staticClass:"login"},[t("em",{staticClass:"bold"},[e._v("已有美团账号？")]),e._v(" "),t("a",{attrs:{href:"/login"}},[t("el-button",{attrs:{type:"primary",size:"small"}},[e._v("登录")])],1)])])]),e._v(" "),t("section",[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"昵称",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}}),e._v(" "),t("el-button",{attrs:{size:"mini",round:""},on:{click:e.sendMsg}},[e._v("发送验证码")]),e._v(" "),t("span",{staticClass:"status"},[e._v(e._s(e.statusMsg))])],1),e._v(" "),t("el-form-item",{attrs:{label:"验证码",prop:"code"}},[t("el-input",{attrs:{maxlength:"4"},model:{value:e.ruleForm.code,callback:function(r){e.$set(e.ruleForm,"code",r)},expression:"ruleForm.code"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"密码",prop:"pwd"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.pwd,callback:function(r){e.$set(e.ruleForm,"pwd",r)},expression:"ruleForm.pwd"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认密码",prop:"cpwd"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.cpwd,callback:function(r){e.$set(e.ruleForm,"cpwd",r)},expression:"ruleForm.cpwd"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.register}},[e._v("同意以下协议并注册")]),e._v(" "),t("div",{staticClass:"error"},[e._v(e._s(e.error))])],1),e._v(" "),t("el-form-item",[t("a",{staticClass:"f1",attrs:{href:"http://www.meituan.com/about/terms",target:"_blank"}},[e._v("《美团网用户协议》")])])],1)],1)])};a._withStripped=!0;t(162),t(163),t(38);var s=t(339),o=t.n(s),i={data:function(){var e=this;return{statusMsg:"",error:"",ruleForm:{name:"",code:"",pwd:"",cpwd:"",email:""},rules:{name:[{required:!0,type:"string",message:"请输入昵称",trigger:"blur"}],email:[{required:!0,type:"email",message:"请输入邮箱",trigger:"blur"}],pwd:[{required:!0,message:"创建密码",trigger:"blur"}],cpwd:[{required:!0,message:"确认密码",trigger:"blur"},{validator:function(r,t,a){""===t?a(new Error("请再次输入密码")):t!==e.ruleForm.pwd?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]}}},layout:"blank",methods:{sendMsg:function(){var e,r,t=this;return!t.timerid&&(this.$refs.ruleForm.validateField("name",function(r){e=r}),t.statusMsg="",!e&&(this.$refs.ruleForm.validateField("email",function(e){r=e}),void(e||r||t.$axios.post("/users/verify",{username:encodeURIComponent(t.ruleForm.name),email:t.ruleForm.email}).then(function(e){var r=e.status,a=e.data;if(200===r&&a&&0===a.code){var s=60;t.statusMsg="验证码已发送,剩余".concat(s--,"秒"),t.timerid=setInterval(function(){t.statusMsg="验证码已发送,剩余".concat(s--,"秒"),0===s&&clearInterval(t.timerid)},1e3)}else t.statusMsg=a.msg}))))},register:function(){var e=this;this.$refs.ruleForm.validate(function(r){r&&e.$axios.post("/users/signup",{username:window.encodeURIComponent(e.ruleForm.name),password:o.a.MD5(e.ruleForm.pwd).toString(),email:e.ruleForm.email,code:e.ruleForm.code}).then(function(r){var t=r.status,a=r.data;200===t?a&&0===a.code?location.href="/login":e.error=a.msg:e.error="服务器出错，错误码:".concat(t),setTimeout(function(){e.error=""},1500)})})}}},l=(t(365),t(1)),n=Object(l.a)(i,a,[],!1,null,null,null);n.options.__file="register.vue";r.default=n.exports}}]);